import{r as o,j as e,B as u,C as h,c as g}from"./index-B6T-XhSG.js";import{R as x}from"./RecordCard-DD-iK0fi.js";import{Q as a}from"./react-toastify.esm-CR3KtYOa.js";function E(){const[d,l]=o.useState([]),[m,r]=o.useState(!1);return o.useEffect(()=>{(async()=>{try{if(r(!0),!window.ethereum){a.error("Please connect to MetaMask to view records."),r(!1);return}const f=await new u(window.ethereum).getSigner(),i=(await new h("0x8576E2D1bF399Ae7E41167458a3866E9efD1Ce4A",g,f).getAllRecords()).map((c,n)=>({id:n,title:c.title||`Record #${n+1}`,cid:c.cid,resourceId:c.resourceId}));l(i),a.success(`Fetched ${i.length} records successfully.`)}catch(s){console.error("Error fetching records:",s),a.error(`Error fetching records: ${s.message}`)}finally{r(!1)}})()},[]),e.jsxs("div",{className:"p-6 bg-white rounded-2xl shadow-sm border border-slate-100",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Patient Records"}),m?e.jsx("div",{className:"text-center text-slate-500 py-10 animate-pulse",children:"Loading records from blockchainâ€¦"}):d.length===0?e.jsx("div",{className:"text-center text-slate-500 py-10",children:"No records found on MediSecure chain."}):e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(t=>e.jsx(x,{title:t.title,cid:t.cid,resourceId:t.resourceId},t.id))})]})}export{E as default};
