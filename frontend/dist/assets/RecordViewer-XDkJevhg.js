import{d as g,e as h,a,j as s,f as j}from"./index-nTQIyIYe.js";function v(){const{id:i}=g(),u=h(),[f,d]=a.useState(!0),[t,m]=a.useState(null),[x,n]=a.useState(!1),[l,o]=a.useState(null);if(a.useEffect(()=>{let r=!0;async function p(){d(!0);try{const e=await j.get(`/api/records/${i}`);if(!r)return;e.access===!1?n(!0):m(e.record)}catch(e){e&&e.message&&e.message.includes("Access Denied")||e&&e.response&&e.response.status===403?n(!0):e&&e.response&&e.response.status===404?o("Record not found"):o(e.message||"Failed to load record")}finally{r&&d(!1)}}return p(),()=>{r=!1}},[i,u]),f)return s.jsx("div",{className:"p-6 text-center",children:"Loading recordâ€¦"});if(x)return s.jsx("div",{className:"p-6 text-center text-red-600",children:"Access Denied"});if(l)return s.jsx("div",{className:"p-6 text-center text-red-600",children:l});let c=null;try{c=typeof t.data=="string"?JSON.parse(t.data):t.data}catch{c=t.data}return s.jsxs("div",{className:"p-6 bg-white min-h-screen",children:[s.jsxs("h1",{className:"text-2xl font-semibold mb-4",children:["Record ",t.id]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("strong",{children:"Patient ID:"})," ",t.patientid||t.patientId]}),s.jsx("div",{className:"bg-gray-50 p-4 rounded",children:s.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:JSON.stringify(c,null,2)})}),s.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:["Created: ",new Date(Number(t.createdat||t.createdAt)).toLocaleString()]})]})}export{v as default};
