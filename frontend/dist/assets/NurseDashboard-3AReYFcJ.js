import{r as a,j as e,B as m,C as N,c as b}from"./index-B6T-XhSG.js";import{Q as n}from"./react-toastify.esm-CR3KtYOa.js";import{C as y}from"./clipboard-copy-CGttmhrS.js";const S=()=>{const[r,x]=a.useState(""),[o,g]=a.useState([]),[c,d]=a.useState(!1),[v,l]=a.useState(!1),h="0x8576E2D1bF399Ae7E41167458a3866E9efD1Ce4A",u=async()=>{if(!window.ethereum)return n.error("Please install MetaMask.");const i=await new m(window.ethereum).send("eth_requestAccounts",[]);x(i[0]),n.success("Wallet connected successfully!")},p=async()=>{try{d(!0);const i=await new m(window.ethereum).getSigner(),j=(await new N(h,b,i).getAllPatients()).map((s,w)=>({id:w+1,name:s.name,age:Number(s.age),gender:s.gender,diagnosis:s.diagnosis,date:new Date(Number(s.timestamp)*1e3).toLocaleString()}));g(j)}catch(t){console.error("Error fetching patient data:",t),n.error("Failed to fetch patient records.")}finally{d(!1)}},f=()=>{navigator.clipboard.writeText(r),l(!0),n.success("Wallet address copied!"),setTimeout(()=>l(!1),2e3)};return a.useEffect(()=>{u()},[]),e.jsxs("div",{className:"p-6 min-h-screen bg-gradient-to-b from-pink-50 to-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-pink-700",children:"ðŸ©º Nurse Dashboard"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm text-gray-600 truncate max-w-[180px]",children:r||"Not Connected"}),e.jsx(Button,{onClick:f,variant:"outline",size:"icon",children:e.jsx(y,{size:16})})]})]}),e.jsx("div",{className:"flex gap-4 mb-6",children:e.jsx(Button,{onClick:p,disabled:c,children:c?"Loading...":"View Patient Records"})}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(t=>e.jsxs("div",{className:"bg-white rounded-xl shadow p-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("strong",{children:"Age:"})," ",t.age]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Gender:"})," ",t.gender]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("strong",{children:"Diagnosis:"})," ",t.diagnosis]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[e.jsx("strong",{children:"Date:"})," ",t.date]})]},t.id))}),!o.length&&!c&&e.jsx("p",{className:"text-center text-gray-500 mt-10",children:"No patient data available yet."})]})};export{S as default};
