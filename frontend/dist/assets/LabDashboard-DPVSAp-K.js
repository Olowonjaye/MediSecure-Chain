import{r as s,j as e,B as x,C as w,c as y}from"./index-9F5p74Tb.js";import{Q as r}from"./react-toastify.esm-D6P_Q-G5.js";import{C as N}from"./clipboard-copy-tQOQfumy.js";const D=()=>{const[c,m]=s.useState(""),[i,p]=s.useState([]),[n,l]=s.useState(!1),[v,d]=s.useState(!1),h="0x8576E2D1bF399Ae7E41167458a3866E9efD1Ce4A",u=async()=>{if(!window.ethereum)return r.error("Please install MetaMask.");const o=await new x(window.ethereum).send("eth_requestAccounts",[]);m(o[0]),r.success("Wallet connected successfully!")},g=async()=>{try{l(!0);const o=await new x(window.ethereum).getSigner(),b=(await new w(h,y,o).getAllLabReports()).map((a,j)=>({id:j+1,patient:a.patient,testType:a.testType,result:a.result,date:new Date(Number(a.timestamp)*1e3).toLocaleString()}));p(b)}catch(t){console.error("Error fetching lab reports:",t),r.error("Failed to fetch lab reports.")}finally{l(!1)}},f=()=>{navigator.clipboard.writeText(c),d(!0),r.success("Wallet address copied!"),setTimeout(()=>d(!1),2e3)};return s.useEffect(()=>{u()},[]),e.jsxs("div",{className:"p-6 min-h-screen bg-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-green-700",children:"ðŸ§ª Laboratory Dashboard"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm text-gray-600 truncate max-w-[180px]",children:c||"Not Connected"}),e.jsx(Button,{onClick:f,variant:"outline",size:"icon",children:e.jsx(N,{size:16})})]})]}),e.jsx("div",{className:"flex gap-4 mb-6",children:e.jsx(Button,{onClick:g,disabled:n,children:n?"Loading Reports...":"View Lab Reports"})}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(t=>e.jsxs("div",{className:"bg-white rounded-xl shadow p-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800",children:["Patient: ",t.patient.slice(0,6),"...",t.patient.slice(-4)]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[e.jsx("strong",{children:"Test Type:"})," ",t.testType]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("strong",{children:"Result:"})," ",t.result]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[e.jsx("strong",{children:"Date:"})," ",t.date]})]},t.id))}),!i.length&&!n&&e.jsx("p",{className:"text-center text-gray-500 mt-10",children:"No lab reports available yet."})]})};export{D as default};
