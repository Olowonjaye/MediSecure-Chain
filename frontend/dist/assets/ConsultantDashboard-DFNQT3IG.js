import{b as p,r as l,j as e}from"./index-B6T-XhSG.js";import{a as c}from"./api-BmIVOgyt.js";import{F as j,f as N,g as y}from"./index.esm-BOLxF5GI.js";const v=()=>{const{user:a,logout:x}=p(),[d,m]=l.useState([]),[t,r]=l.useState(null),[n,i]=l.useState(""),[h,g]=l.useState(!0);l.useEffect(()=>{(async()=>{try{const o=await c.get("/cases/consultant");m(o.data)}catch(o){console.error("Error loading consultant cases:",o)}finally{g(!1)}})()},[]);const b=s=>{r(s),i(s.diagnosis||"")},u=async()=>{if(!t)return alert("No case selected.");try{await c.put(`/cases/${t.id}/diagnosis`,{diagnosis:n}),alert("Diagnosis updated successfully."),r({...t,diagnosis:n})}catch(s){console.error("Error saving diagnosis:",s),alert("Failed to update diagnosis.")}};return h?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading consultant dashboard..."}):e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 border-b pb-3",children:[e.jsxs("h1",{className:"text-2xl font-bold text-blue-800 flex items-center gap-2",children:[e.jsx(j,{})," Consultant Dashboard"]}),e.jsx("button",{onClick:x,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg",children:"Logout"})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-5 mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-700",children:["Welcome, ",(a==null?void 0:a.name)||"Consultant"]}),e.jsxs("p",{className:"text-gray-500",children:["You are logged in as ",e.jsx("strong",{children:a==null?void 0:a.role}),"."]})]}),e.jsxs("section",{className:"bg-white shadow-md rounded-lg p-5 mb-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(N,{})," Assigned Cases"]})}),d.length===0?e.jsx("p",{className:"text-gray-500",children:"No assigned cases found."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-700 border",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-3 border",children:"Patient"}),e.jsx("th",{className:"py-2 px-3 border",children:"Symptoms"}),e.jsx("th",{className:"py-2 px-3 border",children:"Date Assigned"}),e.jsx("th",{className:"py-2 px-3 border",children:"Action"})]})}),e.jsx("tbody",{children:d.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 border",children:s.patientName}),e.jsx("td",{className:"py-2 px-3 border",children:s.symptoms}),e.jsx("td",{className:"py-2 px-3 border",children:new Date(s.assignedAt).toLocaleString()}),e.jsx("td",{className:"py-2 px-3 border",children:e.jsx("button",{onClick:()=>b(s),className:"text-blue-600 hover:underline",children:"View"})})]},s.id))})]})})]}),t&&e.jsxs("section",{className:"bg-white shadow-md rounded-lg p-5",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:[e.jsx(y,{className:"inline-block mr-2"}),"Diagnosis for ",t.patientName]}),e.jsx("textarea",{className:"w-full border rounded-md p-3 text-sm mb-4",rows:6,placeholder:"Write diagnosis notes here...",value:n,onChange:s=>i(s.target.value)}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>r(null),className:"bg-gray-400 hover:bg-gray-500 text-white px-4 py-2 rounded-md",children:"Cancel"}),e.jsx("button",{onClick:u,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md",children:"Save Diagnosis"})]})]})]})};export{v as default};
