import{r,j as e,B as m,C as N,c as b}from"./index-9F5p74Tb.js";import{Q as a}from"./react-toastify.esm-D6P_Q-G5.js";import{C as y}from"./clipboard-copy-tQOQfumy.js";const S=()=>{const[c,x]=r.useState(""),[n,h]=r.useState([]),[i,d]=r.useState(!1),[v,l]=r.useState(!1),p="0x8576E2D1bF399Ae7E41167458a3866E9efD1Ce4A",g=async()=>{if(!window.ethereum)return a.error("Please install MetaMask.");const o=await new m(window.ethereum).send("eth_requestAccounts",[]);x(o[0]),a.success("Wallet connected successfully!")},u=async()=>{try{d(!0);const o=await new m(window.ethereum).getSigner(),j=(await new N(p,b,o).getAllPrescriptions()).map((s,w)=>({id:w+1,patient:s.patient,doctor:s.doctor,medication:s.medication,dosage:s.dosage,date:new Date(Number(s.timestamp)*1e3).toLocaleString()}));h(j)}catch(t){console.error("Error fetching prescriptions:",t),a.error("Failed to load prescription records.")}finally{d(!1)}},f=()=>{navigator.clipboard.writeText(c),l(!0),a.success("Wallet address copied!"),setTimeout(()=>l(!1),2e3)};return r.useEffect(()=>{g()},[]),e.jsxs("div",{className:"p-6 min-h-screen bg-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-emerald-700",children:"ðŸ’Š Pharmacist Dashboard"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm text-gray-600 truncate max-w-[180px]",children:c||"Not Connected"}),e.jsx(Button,{onClick:f,variant:"outline",size:"icon",children:e.jsx(y,{size:16})})]})]}),e.jsx("div",{className:"flex gap-4 mb-6",children:e.jsx(Button,{onClick:u,disabled:i,children:i?"Loading...":"View Prescriptions"})}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(t=>e.jsxs("div",{className:"bg-white rounded-xl shadow p-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800",children:["Patient: ",t.patient]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("strong",{children:"Prescribed by:"})," ",t.doctor]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("strong",{children:"Medication:"})," ",t.medication]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Dosage:"})," ",t.dosage]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[e.jsx("strong",{children:"Date:"})," ",t.date]})]},t.id))}),!n.length&&!i&&e.jsx("p",{className:"text-center text-gray-500 mt-10",children:"No prescription data available yet."})]})};export{S as default};
