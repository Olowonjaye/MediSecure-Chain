import{b as g,r as c,j as e}from"./index-B6T-XhSG.js";import{a as n}from"./api-BmIVOgyt.js";import{F as p,a as u,b as N,c as y,d as f,e as w}from"./index.esm-BOLxF5GI.js";const F=()=>{const{user:a,logout:o}=g(),[l,x]=c.useState([]),[i,m]=c.useState([]),[h,b]=c.useState(!0);c.useEffect(()=>{(async()=>{try{const[t,j]=await Promise.all([n.get("/users"),n.get("/audit").catch(()=>({data:[]}))]);x(t.data),m(j.data||[])}catch(t){console.error("AdminDashboard fetch error:",t)}finally{b(!1)}})()},[]);const d=l.reduce((s,t)=>(s[t.role]=(s[t.role]||0)+1,s),{});return h?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading dashboard..."}):e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 border-b pb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-blue-800",children:"MediSecure Admin Dashboard"}),e.jsx("button",{onClick:o,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg",children:"Logout"})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-5 mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-700",children:["Welcome, ",(a==null?void 0:a.name)||"Admin"]}),e.jsxs("p",{className:"text-gray-500",children:["You are logged in as ",e.jsx("strong",{children:a==null?void 0:a.role}),"."]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:[e.jsx(r,{icon:e.jsx(p,{}),label:"Doctors",count:d.doctor||0}),e.jsx(r,{icon:e.jsx(u,{}),label:"Nurses",count:d.nurse||0}),e.jsx(r,{icon:e.jsx(N,{}),label:"Pharmacists",count:d.pharmacist||0}),e.jsx(r,{icon:e.jsx(y,{}),label:"Lab Scientists",count:d.lab||0}),e.jsx(r,{icon:e.jsx(f,{}),label:"Consultants",count:d.consultant||0}),e.jsx(r,{icon:e.jsx(w,{}),label:"Total Users",count:l.length})]}),e.jsxs("section",{className:"bg-white shadow-md rounded-lg p-5 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Registered Users"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-700 border",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-3 border",children:"Name"}),e.jsx("th",{className:"py-2 px-3 border",children:"Email"}),e.jsx("th",{className:"py-2 px-3 border",children:"Role"}),e.jsx("th",{className:"py-2 px-3 border",children:"Created At"})]})}),e.jsx("tbody",{children:l.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 border",children:s.name}),e.jsx("td",{className:"py-2 px-3 border",children:s.email}),e.jsx("td",{className:"py-2 px-3 border capitalize",children:s.role}),e.jsx("td",{className:"py-2 px-3 border",children:new Date(s.createdAt).toLocaleString()})]},s.id))})]})})]}),e.jsxs("section",{className:"bg-white shadow-md rounded-lg p-5",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"System Audit Logs"}),i.length===0?e.jsx("p",{className:"text-gray-500",children:"No audit logs yet."}):e.jsx("div",{className:"max-h-64 overflow-y-auto border rounded-md p-3 text-sm",children:i.map(s=>e.jsxs("div",{className:"border-b py-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:s.type}),": ",s.message]}),e.jsx("p",{className:"text-gray-400 text-xs",children:new Date(s.ts).toLocaleString()})]},s.id))})]})]})},r=({icon:a,label:o,count:l})=>e.jsxs("div",{className:"flex items-center bg-white rounded-xl shadow p-4 space-x-4",children:[e.jsx("div",{className:"text-blue-600 text-3xl",children:a}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:o}),e.jsx("p",{className:"text-xl font-bold text-gray-800",children:l})]})]});export{F as default};
